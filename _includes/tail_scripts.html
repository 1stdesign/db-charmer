<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>

<!-- scripts concatenated and minified via ant build script-->
<script defer src="js/libs/waypoints-1.1.js"></script>
<script defer src="js/plugins.js"></script>
<script defer src="js/script.js"></script>
<!-- end scripts-->


<script> // Change UA-XXXXX-X to be your site's ID
  window._gaq = [['_setAccount','UAXXXXXXXX1'],['_trackPageview'],['_trackPageLoadTime']];
  Modernizr.load({
    load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
  });
</script>

<script>
$(document).ready(function() {
    var container = $('#container');
    $.waypoints.settings.scrollThrottle = 30;
    container.waypoint(function(event, direction) {
        // ...
    }).find('#main-menu').waypoint(function(event, direction) {
        container.toggleClass('sticky', direction === "down");
        event.stopPropagation();
    }, { offset: 0 });

    // Register each article as a waypoint.
    $('#main article').waypoint({ offset: '50%' });

    // The same for all waypoints
    container.delegate('#main article', 'waypoint.reached', function(event, direction) {
        var $active = $(this);

        if (direction === "up") {
            $active = $active.prev();
        }
        if (!$active.length) $active.end();

        $('#main-menu .current').removeClass('current');
        $('#main-menu a[href="#' + $active.attr('id') + '"]').parent().addClass('current');
    });

    $('#main-menu a').click(function() {
        $(this).addClass('current');
    }).eq(0).addClass('current');

    // Wicked credit to
    // http://www.zachstronaut.com/posts/2009/01/18/jquery-smooth-scroll-bugs.html
    var scrollElement = 'html, body';
    $('html, body').each(function () {
        var initScrollTop = $(this).attr('scrollTop');
        $(this).attr('scrollTop', initScrollTop + 1);
        if ($(this).attr('scrollTop') == initScrollTop + 1) {
            scrollElement = this.nodeName.toLowerCase();
            $(this).attr('scrollTop', initScrollTop);
            return false;
        }
    });

    // Smooth scrolling for internal links
    $("a[href^='#']").click(function(event) {
        event.preventDefault();

        var $this = $(this),
        target = this.hash,
        $target = $(target);

        $(scrollElement).stop().animate({
            'scrollTop': $target.offset().top
        }, 500, 'swing', function() {
            window.location.hash = target;
        });

    });});
</script
